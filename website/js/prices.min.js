(function(){"use strict";const j="/api/v1/suppliers",m={10501:"Westchester County",10502:"Westchester County",10503:"Westchester County",10504:"Westchester County",10505:"Westchester County",10506:"Westchester County",10507:"Westchester County",10509:"Westchester County",10510:"Westchester County",10514:"Westchester County",10516:"Westchester County",10517:"Westchester County",10518:"Westchester County",10519:"Westchester County",10520:"Westchester County",10521:"Westchester County",10522:"Westchester County",10523:"Westchester County",10524:"Westchester County",10526:"Westchester County",10527:"Westchester County",10528:"Westchester County",10530:"Westchester County",10532:"Westchester County",10533:"Westchester County",10535:"Westchester County",10536:"Westchester County",10537:"Westchester County",10538:"Westchester County",10540:"Westchester County",10541:"Westchester County",10543:"Westchester County",10545:"Westchester County",10546:"Westchester County",10547:"Westchester County",10548:"Westchester County",10549:"Westchester County",10550:"Westchester County",10552:"Westchester County",10553:"Westchester County",10560:"Westchester County",10562:"Westchester County",10566:"Westchester County",10567:"Westchester County",10570:"Westchester County",10573:"Westchester County",10576:"Westchester County",10577:"Westchester County",10578:"Westchester County",10580:"Westchester County",10583:"Westchester County",10588:"Westchester County",10589:"Westchester County",10590:"Westchester County",10591:"Westchester County",10594:"Westchester County",10595:"Westchester County",10597:"Westchester County",10598:"Westchester County",10601:"Westchester County",10603:"Westchester County",10604:"Westchester County",10605:"Westchester County",10606:"Westchester County",10607:"Westchester County",10701:"Westchester County",10703:"Westchester County",10704:"Westchester County",10705:"Westchester County",10706:"Westchester County",10707:"Westchester County",10708:"Westchester County",10709:"Westchester County",10710:"Westchester County",10801:"Westchester County",10803:"Westchester County",10804:"Westchester County",10805:"Westchester County",11701:"Suffolk County",11702:"Suffolk County",11703:"Suffolk County",11704:"Suffolk County",11705:"Suffolk County",11706:"Suffolk County",11713:"Suffolk County",11715:"Suffolk County",11716:"Suffolk County",11717:"Suffolk County",11718:"Suffolk County",11719:"Suffolk County",11720:"Suffolk County",11721:"Suffolk County",11722:"Suffolk County",11724:"Suffolk County",11725:"Suffolk County",11726:"Suffolk County",11727:"Suffolk County",11729:"Suffolk County",11730:"Suffolk County",11731:"Suffolk County",11733:"Suffolk County",11738:"Suffolk County",11739:"Suffolk County",11740:"Suffolk County",11741:"Suffolk County",11742:"Suffolk County",11743:"Suffolk County",11746:"Suffolk County",11747:"Suffolk County",11749:"Suffolk County",11751:"Suffolk County",11752:"Suffolk County",11754:"Suffolk County",11755:"Suffolk County",11757:"Suffolk County",11758:"Suffolk County",11763:"Suffolk County",11764:"Suffolk County",11766:"Suffolk County",11767:"Suffolk County",11768:"Suffolk County",11769:"Suffolk County",11770:"Suffolk County",11772:"Suffolk County",11776:"Suffolk County",11777:"Suffolk County",11778:"Suffolk County",11779:"Suffolk County",11780:"Suffolk County",11782:"Suffolk County",11784:"Suffolk County",11786:"Suffolk County",11787:"Suffolk County",11788:"Suffolk County",11789:"Suffolk County",11790:"Suffolk County",11792:"Suffolk County",11794:"Suffolk County",11795:"Suffolk County",11796:"Suffolk County",11798:"Suffolk County",11001:"Nassau County",11002:"Nassau County",11003:"Nassau County",11010:"Nassau County",11020:"Nassau County",11021:"Nassau County",11023:"Nassau County",11024:"Nassau County",11030:"Nassau County",11040:"Nassau County",11042:"Nassau County",11050:"Nassau County",11096:"Nassau County",11501:"Nassau County",11507:"Nassau County",11509:"Nassau County",11510:"Nassau County",11514:"Nassau County",11516:"Nassau County",11518:"Nassau County",11520:"Nassau County",11530:"Nassau County",11542:"Nassau County",11545:"Nassau County",11548:"Nassau County",11549:"Nassau County",11550:"Nassau County",11552:"Nassau County",11553:"Nassau County",11554:"Nassau County",11556:"Nassau County",11557:"Nassau County",11558:"Nassau County",11559:"Nassau County",11560:"Nassau County",11561:"Nassau County",11563:"Nassau County",11565:"Nassau County",11566:"Nassau County",11568:"Nassau County",11569:"Nassau County",11570:"Nassau County",11572:"Nassau County",11575:"Nassau County",11576:"Nassau County",11577:"Nassau County",11579:"Nassau County",11580:"Nassau County",11581:"Nassau County",11590:"Nassau County",11596:"Nassau County",11598:"Nassau County",11599:"Nassau County","06601":"Fairfield County","06604":"Fairfield County","06605":"Fairfield County","06606":"Fairfield County","06607":"Fairfield County","06608":"Fairfield County","06610":"Fairfield County","06611":"Fairfield County","06612":"Fairfield County","06614":"Fairfield County","06615":"Fairfield County","06776":"Fairfield County","06801":"Fairfield County","06804":"Fairfield County","06807":"Fairfield County","06810":"Fairfield County","06811":"Fairfield County","06812":"Fairfield County","06820":"Fairfield County","06824":"Fairfield County","06825":"Fairfield County","06828":"Fairfield County","06830":"Fairfield County","06831":"Fairfield County","06840":"Fairfield County","06850":"Fairfield County","06851":"Fairfield County","06853":"Fairfield County","06854":"Fairfield County","06855":"Fairfield County","06856":"Fairfield County","06857":"Fairfield County","06858":"Fairfield County","06870":"Fairfield County","06877":"Fairfield County","06878":"Fairfield County","06880":"Fairfield County","06883":"Fairfield County","06888":"Fairfield County","06889":"Fairfield County","06896":"Fairfield County","06897":"Fairfield County"},Z=document.getElementById("zip-form"),g=document.getElementById("zip-input"),S=document.getElementById("check-btn"),B=document.getElementById("loading-state"),_=document.getElementById("results-section"),A=document.getElementById("empty-state"),F=document.getElementById("error-state"),P=document.getElementById("app-cta"),R=document.getElementById("share-btn"),v=document.getElementById("share-feedback"),V=document.getElementById("retry-btn"),x=document.getElementById("bookmark-hint"),h=document.getElementById("price-movement"),b=document.getElementById("prices-trust"),p=document.getElementById("default-leaderboard"),T=document.getElementById("pulse-suppliers"),M=document.getElementById("pulse-states");let l="",w=[],K=Date.now(),W=0;async function J(){try{const e=await fetch("/api/market/pulse");if(!e.ok)return;const t=await e.json();T&&t.supplierCount&&(T.textContent=t.supplierCount+"+"),M&&t.stateCount&&(M.textContent=t.stateCount),b&&t.supplierCount&&(b.textContent="Tracking prices from "+t.supplierCount+"+ active heating oil suppliers in our network.")}catch(e){}}async function q(){try{const e=await fetch("/api/market/leaderboard");if(!e.ok)return;const t=await e.json(),o=document.getElementById("leaderboard-date");o&&t.generatedAt&&(o.textContent="Updated "+t.generatedAt);const a=document.querySelector(".averages-table tbody");if(a&&t.stateAverages&&t.stateAverages.length>0){const r=t.stateAverages.map(function(s){const i=s.stateName.toLowerCase().replace(/\s+/g,"-"),u=s.state.toLowerCase();return'<tr><td><a href="prices/'+u+'/">'+c(s.stateName)+"</a></td><td>$"+s.avgPrice.toFixed(2)+" avg</td><td>"+s.supplierCount+' suppliers</td><td><a href="prices/'+u+'/">See all \u2192</a></td></tr>'}).join(`
`);a.innerHTML=r}const n=document.querySelector(".deals-list");if(n&&t.topDeals&&t.topDeals.length>0){const r=t.topDeals.map(function(s){return'<li class="deal-item"><span class="deal-price">$'+s.price+'/gal</span><span class="deal-supplier">'+c(s.supplierName)+'</span><span class="deal-location">'+c(s.city)+", "+s.state+"</span></li>"}).join(`
`);n.innerHTML=r}}catch(e){}}function ge(e){const t=new Date(e),a=new Date-t,n=Math.floor(a/(1e3*60*60*24));return n<=0?"Updated today":n===1?"Updated yesterday":n<7?`Updated ${n} days ago`:`Updated ${t.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}`}function Y(){J(),q(),ie(),window.addEventListener("beforeunload",ce);const t=new URLSearchParams(window.location.search).get("zip"),o=localStorage.getItem("homeheat_last_zip");t&&/^\d{5}$/.test(t)?(g.value=t,I(t)):o&&/^\d{5}$/.test(o)&&(g.value=o),Z.addEventListener("submit",z),R.addEventListener("click",se),V.addEventListener("click",Q),g.addEventListener("input",a=>{a.target.value=a.target.value.replace(/\D/g,"").slice(0,5)})}function z(e){e.preventDefault();const t=g.value.trim();if(!/^\d{5}$/.test(t)){H("Please enter a valid 5-digit ZIP code.");return}I(t)}function Q(){l&&I(l)}async function I(e){l=e,localStorage.setItem("homeheat_last_zip",e);const t=new URL(window.location);t.searchParams.set("zip",e),window.history.replaceState({},"",t),k("loading"),S.disabled=!0,S.textContent="Loading...";try{const o=await fetch(`${j}?zip=${e}`);if(!o.ok)throw new Error(`API error: ${o.status}`);const a=await o.json();if(a.data&&a.data.length>0){const n=a.data.filter(s=>s.currentPrice&&s.currentPrice.pricePerGallon),r=a.data.filter(s=>!s.currentPrice||!s.currentPrice.pricePerGallon);n.length>0?(w=n,X(e,n,r),k("results"),d("price_lookup",{zip:e,count:n.length,unpricedCount:r.length})):r.length>0?(w=[],ee(e,r),k("results"),d("price_lookup_unpriced_only",{zip:e,count:r.length})):(O(e),d("price_lookup_empty",{zip:e,reason:"no_prices"}))}else O(e),d("price_lookup_empty",{zip:e,reason:"no_suppliers"})}catch(o){console.error("Price lookup failed:",o),H("We couldn't load prices right now. Please try again."),d("price_lookup_error",{zip:e,error:o.message})}finally{S.disabled=!1,S.textContent="Check Prices"}}function X(e,t,o=[]){t.sort((f,N)=>f.currentPrice.pricePerGallon-N.currentPrice.pricePerGallon);const a=t.map(f=>f.currentPrice.pricePerGallon),n=Math.min(...a),r=Math.max(...a),s=r-n,i=Math.round(s*200),u=m[e],y=u?`${u} (${e})`:`ZIP ${e}`;document.getElementById("result-location").textContent=y,document.getElementById("lowest-price").textContent=`$${n.toFixed(2)}`,document.getElementById("highest-price").textContent=`$${r.toFixed(2)}`;const C=document.getElementById("savings-potential");i>0?(C.innerHTML=`Save up to <strong>$${i}</strong> on 200 gallons`,C.style.display="block"):C.style.display="none";const Ce=t.reduce((f,N)=>{const $=N.currentPrice.scrapedAt?new Date(N.currentPrice.scrapedAt):null;return $&&$>f?$:f},new Date(0));document.getElementById("freshness").textContent=re(Ce);const me=document.getElementById("supplier-cards");let G=t.map(f=>ae(f)).join("");o.length>0&&(G+=`
        <div class="unpriced-section">
          <h3 class="unpriced-heading">Other Suppliers in Your Area</h3>
          <p class="unpriced-subtitle">Call for current pricing</p>
          ${o.map(f=>E(f)).join("")}
        </div>
      `),me.innerHTML=G,sessionStorage.getItem("homeheat_bookmark_shown")||(x.style.display="block",sessionStorage.setItem("homeheat_bookmark_shown","true")),h.style.display="none",de(e,n),ye(t.length),fe(e,t),typeof window.showPwaInstallBanner=="function"&&setTimeout(()=>window.showPwaInstallBanner(),1500)}function ee(e,t){const o=m[e],a=o?`${o} (${e})`:`ZIP ${e}`;document.getElementById("result-location").textContent=a,document.getElementById("lowest-price").textContent="Call",document.getElementById("highest-price").textContent="Call";const n=document.getElementById("savings-potential");n.innerHTML=`<strong>${t.length}</strong> supplier${t.length>1?"s":""} serve this area`,n.style.display="block",document.getElementById("freshness").textContent="Call for prices";const r=document.getElementById("supplier-cards");r.innerHTML=`
      <div class="unpriced-notice">
        <p>We don't have current pricing for suppliers in this area yet. Contact them directly for quotes.</p>
      </div>
      ${t.map(s=>E(s)).join("")}
    `,sessionStorage.getItem("homeheat_bookmark_shown")||(x.style.display="block",sessionStorage.setItem("homeheat_bookmark_shown","true"))}function te(e){if(!e)return"?";var t=e.split(/\s+/).filter(Boolean);return t.length===0?"?":t.length===1?t[0].substring(0,2).toUpperCase():(t[0].charAt(0)+t[1].charAt(0)).toUpperCase()}function ne(e){if(!e)return 0;for(var t=0,o=0;o<e.length;o++)t=(t<<5)-t+e.charCodeAt(o),t=t&t;return Math.abs(t)%10}function D(e){return'<div class="supplier-avatar" data-color="'+ne(e)+'">'+c(te(e))+"</div>"}function L(e){var t=[];if(e.fuelTypes&&e.fuelTypes.length>0){var o={oil:"Heating Oil",kerosene:"Kerosene",diesel:"Diesel",propane:"Propane"};e.fuelTypes.forEach(function(n){o[n]&&n!=="oil"&&t.push(o[n])})}if(e.paymentMethods&&e.paymentMethods.length>0){var a=e.paymentMethods.indexOf("credit_card")!==-1;a&&t.push("Credit Cards")}return e.seniorDiscount==="yes"&&t.push("Senior Discount"),t.length===0?"":'<div class="supplier-badges">'+t.map(function(n){return'<span class="supplier-badge">'+c(n)+"</span>"}).join("")+"</div>"}function oe(e){if(!e)return'<div class="price-freshness"><span class="freshness-dot stale"></span> Update time unknown</div>';var t=new Date(e);if(isNaN(t.getTime()))return'<div class="price-freshness"><span class="freshness-dot stale"></span> Update time unknown</div>';var o=new Date,a=o-t;if(a<0)return'<div class="price-freshness"><span class="freshness-dot stale"></span> Update time unknown</div>';var n=Math.floor(a/(1e3*60*60)),r=Math.floor(a/(1e3*60*60*24)),s,i;return n<24?(s="fresh",i=n<1?"Updated now":n+"h ago"):r<=3?(s="recent",i=r===1?"Yesterday":r+"d ago"):(s="stale",i=r<7?r+"d ago":t.toLocaleDateString("en-US",{month:"short",day:"numeric"})),'<div class="price-freshness"><span class="freshness-dot '+s+'"></span> '+c(i)+"</div>"}function U(e){return e.claimedAt?'<span class="verified-badge"><svg viewBox="0 0 16 16"><path d="M6.5 12.5l-4-4 1.5-1.5 2.5 2.5 5.5-5.5 1.5 1.5z"/></svg>Verified</span>':""}function ae(e){var t=e.currentPrice,o=t?Number(t.pricePerGallon):NaN;if(!t||!Number.isFinite(o)||o<=0)return E(e);var a=e.phone||"",n=a.replace(/\D/g,""),r=n.length>=10,s=e.website&&/^https?:\/\//i.test(e.website),i=e.slug?encodeURIComponent(e.slug):"",u=150,y=Math.floor(Number(e.minimumGallons||t.minGallons||0)||0);y>u&&(u=y);var C=Math.round(o*u);return'<div class="supplier-card">'+D(e.name)+'<div class="supplier-info"><div class="supplier-name-row"><div class="supplier-name">'+(i?'<a href="/supplier/'+i+'" class="supplier-profile-link">'+c(e.name)+"</a>":c(e.name))+"</div>"+U(e)+'</div><div class="supplier-location">'+c(e.city||"")+", "+c(e.state||"")+"</div>"+L(e)+'<div class="supplier-actions">'+(r?'<a href="tel:'+n+'" class="supplier-phone" data-track-supplier-id="'+e.id+'" data-track-supplier-name="'+c(e.name)+'" data-track-action="call">Call '+c(a)+"</a>":"")+(s?'<a href="'+c(e.website)+'" target="_blank" rel="noopener noreferrer" referrerpolicy="no-referrer" class="supplier-website-btn" data-track-supplier-id="'+e.id+'" data-track-supplier-name="'+c(e.name)+'" data-track-action="website">Visit Website</a>':"")+'</div></div><div class="supplier-price"><div class="price-amount">$'+o.toFixed(2)+'</div><div class="price-unit">per gallon</div><div class="price-estimate">~$'+C+" for "+u+" gal</div>"+(y?'<div class="price-min">'+y+"+ gal min</div>":"")+oe(t.scrapedAt)+"</div></div>"}function E(e){var t=e.phone||"",o=t.replace(/\D/g,""),a=o.length>=10,n=e.website&&/^https?:\/\//i.test(e.website),r=e.slug?encodeURIComponent(e.slug):"";return'<div class="supplier-card supplier-card-unpriced">'+D(e.name)+'<div class="supplier-info"><div class="supplier-name-row"><div class="supplier-name">'+(r?'<a href="/supplier/'+r+'" class="supplier-profile-link">'+c(e.name)+"</a>":c(e.name))+"</div>"+U(e)+'</div><div class="supplier-location">'+c(e.city||"")+", "+c(e.state||"")+"</div>"+L(e)+'<div class="supplier-actions">'+(a?'<a href="tel:'+o+'" class="supplier-phone" data-track-supplier-id="'+e.id+'" data-track-supplier-name="'+c(e.name)+'" data-track-action="call">Call '+c(t)+"</a>":"")+(n?'<a href="'+c(e.website)+'" target="_blank" rel="noopener noreferrer" referrerpolicy="no-referrer" class="supplier-website-btn" data-track-supplier-id="'+e.id+'" data-track-supplier-name="'+c(e.name)+'" data-track-action="website">Visit Website</a>':"")+'</div></div><div class="supplier-price supplier-price-unpriced"><div class="price-unavailable">No online price</div></div></div>'}async function se(){if(w.length===0)return;const e=w.map(i=>i.currentPrice.pricePerGallon),t=Math.min(...e).toFixed(2),o=Math.max(...e).toFixed(2),a=m[l],n=a?`${a} (${l})`:`near ${l}`,r=`Heating oil in ${n} is $${t}\u2013$${o} today. Check your ZIP: gethomeheat.com/prices.html?zip=${l}`,s=`https://gethomeheat.com/prices.html?zip=${l}`;if(navigator.share&&/Mobi|Android/i.test(navigator.userAgent))try{await navigator.share({title:`Heating Oil Prices in ${n}`,text:r,url:s}),d("share_native",{zip:l});return}catch(i){}navigator.clipboard.writeText(r).then(()=>{v.textContent="Copied!",v.style.display="inline",setTimeout(()=>{v.style.display="none"},2e3),d("share_clipboard",{zip:l})}).catch(()=>{v.textContent="Copy failed",v.style.display="inline"})}function k(e){switch(B.style.display="none",_.style.display="none",A.style.display="none",F.style.display="none",P.style.display="none",e){case"loading":B.style.display="block";break;case"results":_.style.display="block",P.style.display="block",p&&(p.style.opacity="0",setTimeout(()=>{p.style.display="none"},300));break;case"empty":A.style.display="block",P.style.display="block",p&&(p.style.opacity="0",setTimeout(()=>{p.style.display="none"},300));break;case"error":F.style.display="block",p&&(p.style.opacity="0",setTimeout(()=>{p.style.display="none"},300));break}}function O(e){document.getElementById("empty-zip").textContent=e,le(e),k("empty")}function H(e){document.getElementById("error-message").textContent=e,k("error")}function re(e){if(!e||e.getTime()===0)return"Updated recently";const o=new Date-e,a=Math.floor(o/(1e3*60*60)),n=Math.floor(o/(1e3*60*60*24));return a<1?"Updated just now":a===1?"Updated 1 hour ago":a<24?`Updated ${a} hours ago`:n===1?"Updated yesterday":n<7?`Updated ${n} days ago`:`Updated ${e.toLocaleDateString()}`}function c(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}function d(e,t){typeof gtag=="function"&&gtag("event",e,t||{})}function ie(){const e="homeheat_visits",t="homeheat_last_visit",o=parseInt(localStorage.getItem(e)||"0",10)+1,a=localStorage.getItem(t),n=Date.now();localStorage.setItem(e,o.toString()),localStorage.setItem(t,n.toString());const r=a&&n-parseInt(a,10)>1440*60*1e3;d("page_view",{visits:o,isReturn:r,daysSinceLastVisit:a?Math.round((n-parseInt(a,10))/(1440*60*1e3)):null})}function ce(){const e=Math.round((Date.now()-K)/1e3);d("page_exit",{timeOnPageSeconds:e,zip:l||null})}function ue(e){const t=e.substring(0,3),o=parseInt(e,10),a=new Set;for(let s=-5;s<=5;s++){if(s===0)continue;const i=(o+s).toString().padStart(5,"0");i.startsWith(t)&&i!==e&&a.add(i)}const n=parseInt(t,10);return[n-1,n+1].forEach(s=>{if(s>=0&&s<=999){const i=s.toString().padStart(3,"0")+e.substring(3);i!==e&&a.add(i)}}),Array.from(a).sort((s,i)=>{const u=m[s]?1:0;return(m[i]?1:0)-u}).slice(0,4)}function le(e){const t=ue(e),o=document.getElementById("nearby-zips"),a=document.getElementById("nearby-zip-buttons");t.length>0&&o&&a&&(a.innerHTML=t.map(n=>`<button class="nearby-zip-btn" data-nearby-zip="${n}">${n}</button>`).join(""),o.style.display="block")}window.lookupZip=function(e){g.value=e,I(e)};function de(e,t){const o=`homeheat_price_${e}`,a=localStorage.getItem(o);if(a)try{const{price:n,timestamp:r}=JSON.parse(a),s=(Date.now()-r)/(1e3*60*60*24);if(s>=1&&s<=14){const i=t-n,u=Math.abs(Math.round(i*100));if(u>=2){const y=document.getElementById("movement-icon"),C=document.getElementById("movement-text");i>0?(h.className="price-movement movement-up",y.textContent="\u2191",C.textContent=`Prices up ${u}\xA2 since last check`):(h.className="price-movement movement-down",y.textContent="\u2193",C.textContent=`Prices down ${u}\xA2 since last check`),h.style.display="flex",d("price_movement_shown",{zip:e,diff:u,direction:i>0?"up":"down"})}else h.className="price-movement movement-flat",document.getElementById("movement-icon").textContent="\u2192",document.getElementById("movement-text").textContent="Prices stable since last check",h.style.display="flex"}}catch(n){console.error("Error parsing cached price:",n)}localStorage.setItem(o,JSON.stringify({price:t,timestamp:Date.now()}))}function ye(e){b&&e>0&&(b.textContent=`Based on live pricing from ${e} verified supplier${e>1?"s":""} in your area.`)}function fe(e,t){const o=document.getElementById("schema-markup");if(!o||t.length===0)return;const a=m[e]||"",n=a?`${a} (${e})`:`ZIP ${e}`,r=t.slice(0,10).map((i,u)=>({"@type":"ListItem",position:u+1,item:{"@type":"Service",name:`Heating Oil Delivery from ${i.name}`,description:`Heating oil delivery service from ${i.name}. Current price: $${i.currentPrice.pricePerGallon.toFixed(2)} per gallon.`,image:"https://www.gethomeheat.com/images/app-icon.png",serviceType:"Heating Oil Delivery",areaServed:n,provider:{"@type":"LocalBusiness",name:i.name,image:"https://www.gethomeheat.com/images/app-icon.png",address:{"@type":"PostalAddress",addressLocality:i.city||"",addressRegion:i.state||""},telephone:i.phone||"",priceRange:`$${i.currentPrice.pricePerGallon.toFixed(2)}/gal`},priceSpecification:{"@type":"UnitPriceSpecification",price:i.currentPrice.pricePerGallon.toFixed(2),priceCurrency:"USD",unitCode:"GLL",unitText:"gallon"}}})),s={"@context":"https://schema.org","@type":"WebPage",name:`Heating Oil Prices in ${n}`,description:`Compare current heating oil prices from ${t.length} local suppliers in ${n}.`,publisher:{"@type":"Organization",name:"HomeHeat",url:"https://gethomeheat.com"},mainEntity:{"@type":"ItemList",name:`Heating Oil Prices in ${n}`,description:`Current heating oil prices from local suppliers serving ${n}`,numberOfItems:t.length,itemListElement:r}};o.textContent=JSON.stringify(s)}window.trackWebsiteClick=function(e,t){const o=Date.now();if(o-W<500)return;W=o;const a=/Mobi|Android/i.test(navigator.userAgent),n=/Android/i.test(navigator.userAgent),r=JSON.stringify({supplierId:e,supplierName:t,action:"website",zipCode:l||null,pageSource:"prices",deviceType:a?"mobile":"desktop",platform:n?"android":a?"ios":"web"});navigator.sendBeacon?navigator.sendBeacon("/api/log-action",new Blob([r],{type:"application/json"})):fetch("/api/log-action",{method:"POST",headers:{"Content-Type":"application/json"},body:r,keepalive:!0}).catch(function(s){console.error("[Tracking] Website click failed:",s)}),typeof gtag=="function"&&gtag("event","supplier_outbound_click",{supplier_id:e,supplier_name:t,zip_code:l||""})},window.trackCallClick=function(e,t){const o=Date.now();if(o-W<500)return;W=o;const a=/Mobi|Android/i.test(navigator.userAgent),n=/Android/i.test(navigator.userAgent),r=JSON.stringify({supplierId:e,supplierName:t,action:"call",zipCode:l||null,pageSource:"prices",deviceType:a?"mobile":"desktop",platform:n?"android":a?"ios":"web"});navigator.sendBeacon?navigator.sendBeacon("/api/log-action",new Blob([r],{type:"application/json"})):fetch("/api/log-action",{method:"POST",headers:{"Content-Type":"application/json"},body:r,keepalive:!0}).catch(function(s){console.error("[Tracking] Call click failed:",s)}),typeof gtag=="function"&&gtag("event","supplier_call_click",{supplier_id:e,supplier_name:t,zip_code:l||""})},document.addEventListener("click",function(e){var t=e.target.closest("a[data-track-supplier-id]");if(t){var o=t.getAttribute("data-track-supplier-id"),a=t.getAttribute("data-track-supplier-name"),n=t.getAttribute("data-track-action");o&&a&&n&&(n==="call"?window.trackCallClick(o,a):n==="website"&&window.trackWebsiteClick(o,a));return}var r=e.target.closest("button[data-nearby-zip]");if(r){var s=r.getAttribute("data-nearby-zip");s&&window.lookupZip(s)}});function pe(){/Android/i.test(navigator.userAgent)&&document.querySelectorAll(".ios-only").forEach(function(e){e.style.display="none"})}Y(),pe()})();
