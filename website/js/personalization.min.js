(function(){const o={NY:{name:"New York",path:"prices/ny/",suppliers:91},CT:{name:"Connecticut",path:"prices/ct/",suppliers:33},MA:{name:"Massachusetts",path:"prices/ma/",suppliers:50},NJ:{name:"New Jersey",path:"prices/nj/",suppliers:15},PA:{name:"Pennsylvania",path:"prices/pa/",suppliers:10},NH:{name:"New Hampshire",path:"prices/nh/",suppliers:19},RI:{name:"Rhode Island",path:"prices/ri/",suppliers:6},ME:{name:"Maine",path:"prices/me/",suppliers:5},MD:{name:"Maryland",path:"prices/md/",suppliers:8},DE:{name:"Delaware",path:"prices/de/",suppliers:3},VA:{name:"Virginia",path:"prices/va/",suppliers:6},AK:{name:"Alaska",path:"prices/ak/",suppliers:3}};function m(){try{const e=localStorage.getItem("homeheat_last_zip");if(e){const t=JSON.parse(e);if(t.zip&&t.location)return h(t.zip,t.location,t.state),!0}}catch(e){}return!1}function h(e,t,a){const n=document.getElementById("personalization-bar"),s=document.getElementById("welcome-back"),i=document.getElementById("last-zip-link");n&&s&&i&&(i.textContent=`${e} (${t})`,i.href=`?zip=${e}`,i.onclick=function(c){c.preventDefault(),document.getElementById("zip-input").value=e,document.getElementById("zip-form").dispatchEvent(new Event("submit"))},s.style.display="inline-flex",n.style.display="block",a&&o[a]&&l(a))}function y(e,t,a){var p,u,d;const n=document.getElementById("personalization-bar"),s=document.getElementById("near-you"),i=document.getElementById("near-you-link"),c=document.getElementById("near-you-count");n&&s&&i&&(i.textContent=t||((p=o[e])==null?void 0:p.name)||e,i.href=((u=o[e])==null?void 0:u.path)||"#",c.textContent=a||((d=o[e])==null?void 0:d.suppliers)||"10+",s.style.display="inline-flex",n.style.display="block",l(e))}function l(e){const t=document.querySelectorAll(".state-tab"),a=o[e];a&&t.forEach(n=>{n.href.includes(a.path)&&(n.classList.add("active"),n.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"}))})}async function f(){try{const e=await fetch("https://ipapi.co/json/",{timeout:3e3,cache:"default"});if(!e.ok)return null;const t=await e.json();if(t.region_code&&o[t.region_code])return{state:t.region_code,city:t.city,region:t.city}}catch(e){}return null}async function r(){if(m())return;const e=await f();e&&y(e.state,e.city)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",r):r(),window.addEventListener("homeheat:zip-searched",function(e){if(e.detail&&e.detail.zip&&e.detail.location)try{localStorage.setItem("homeheat_last_zip",JSON.stringify({zip:e.detail.zip,location:e.detail.location,state:e.detail.state,timestamp:Date.now()}))}catch(t){}})})();
